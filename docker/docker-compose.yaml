version: '3.8'

services:
  zkbob-cloud:
    build: 
      context: ..
      dockerfile: ./docker/Dockerfile
      args:
        VERSION__REF_NAME: local
        VERSION__COMMIT_HASH: b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0
    container_name: zkbob-cloud
    volumes:
      - ../params:/app/params/
      - ../data:/app/data/
      - ../configuration/config.yaml:/app/configuration/config.yaml
    environment:
      CONFIG_FILE: /app/configuration/config.yaml
      RUST_LOG: info
      RUST_BACKTRACE: full
    ports:
      - 8001:8001
    restart: always

  zkbob-cloud-redis:
    image: redis:6.2.6
    container_name: zkbob-cloud-redis
    command: [redis-server]
    ports:
      - 6379:6379